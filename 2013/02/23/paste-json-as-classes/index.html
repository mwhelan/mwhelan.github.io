
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="last-modified" content="2015-12-16T11:02:36.7122880+00:00" />
    <meta name="keywords" content="" />

    <title>Michael Whelan</title>

    <link href="/stylesheets/bootstrap.css" rel="stylesheet">
    <link href="/stylesheets/font-awesome/css/font-awesome.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/stylesheets/github.css" type="text/css">
    <link rel="stylesheet" href="/stylesheets/styles.css" type="text/css" />

    <link rel="canonical" href="http://www.michael-whelan.net/2013/02/23/paste-json-as-classes/" />
</head>
<body>
    <div class="container">
        <!-- row 1: navigation -->
        <div class="row">
            <nav class="navbar navbar-default navbar-fixed-top navbar-inverse" role="navigation">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="http://michael-whelan.net/">behaviour driven blog</a>
                    </div>
                    <div class="collapse navbar-collapse" id="collapse">
                        <ul class="nav navbar-nav">
                            <li><a href="http://about.me/michaelwhelan">About</a></li>
                            <li class="dropdown">
                                <a href="#" data-toggle="dropdown">Categories <span class="caret"></span></a>
                                <ul class="dropdown-menu">
                                        <li>
                                            <a href="/category/automated-testing" title="Automated Testing">Automated Testing</a>
                                        </li>
                                        <li>
                                            <a href="/category/azure" title="Azure">Azure</a>
                                        </li>
                                        <li>
                                            <a href="/category/bddfy" title="BDDfy">BDDfy</a>
                                        </li>
                                        <li>
                                            <a href="/category/black-box-testing-asp.net-series" title="Black-Box Testing ASP.Net Series">Black-Box Testing ASP.Net Series</a>
                                        </li>
                                        <li>
                                            <a href="/category/general" title="General">General</a>
                                        </li>
                                        <li>
                                            <a href="/category/learning" title="Learning">Learning</a>
                                        </li>
                                        <li>
                                            <a href="/category/programming" title="Programming">Programming</a>
                                        </li>
                                        <li>
                                            <a href="/category/seleno" title="Seleno">Seleno</a>
                                        </li>
                                        <li>
                                            <a href="/category/snow" title="Snow">Snow</a>
                                        </li>
                                        <li>
                                            <a href="/category/sql-server" title="SQL Server">SQL Server</a>
                                        </li>
                                        <li>
                                            <a href="/category/test-data" title="Test Data">Test Data</a>
                                        </li>
                                        <li>
                                            <a href="/category/teststack" title="TestStack">TestStack</a>
                                        </li>
                                        <li>
                                            <a href="/category/visual-studio" title="Visual Studio">Visual Studio</a>
                                        </li>
                                </ul>
                            </li>
                            <li><a href="/archive">Archive</a></li>
                            <li><a href="/feed.xml">RSS</a></li>
                        </ul>

                        <div class="navbar-right">
                            <a class="navbar-custom-button" href="https://twitter.com/mjmwhelan" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://twitter.com']);"><img src="/stylesheets/images/twitter.png"></a>
                            <a class="navbar-custom-button" href="https://github.com/mwhelan" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://github.com']);"><img src="/stylesheets/images/github.png"></a>
                            <a class="navbar-custom-button" href="http://www.linkedin.com/in/mwhelan" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://www.linkedin.com']);"><img src="/stylesheets/images/linkedin.png"></a>
                            <a class="navbar-custom-button" href="https://plus.google.com/u/1/105055485720815974241?rel=me" onclick="javascript:_gaq.push(['_trackEvent','outbound-widget','http://plus.google.com']);"><img src="/stylesheets/images/googleplus.png"></a>
                        </div>
                    </div><!--collapse -->
                </div>
            </nav>
        </div><!--row -->
        <!-- row 2: header -->
        <header class="row">
            <a href="/" title="Home"><img width="60" height="60" src="http://www.gravatar.com/avatar/391e4f217a06e3dfc8976a4b99b79617.png" title="logo"></a>
            <h1 class="blog-title">
                <a href="/" title="Michael Whelan" rel="home">Michael Whelan</a>
            </h1>
            <p class="lead blog-description">behaviour driven blog</p>
        </header>

        <!-- row 3: featured -->
        <div class="row">
            
        </div>

        <!-- row 4: body -->
        <div class="row">
            

<div id="post">
    <h1 class="blog-post-title">Paste JSON as Classes</h1>

    <div class="blog-post-meta">
        posted on 23 Feb 2013
            | <a class="label label-primary" href="/category/visual-studio">Visual Studio</a>
    </div>

    <div class="blog-post">
        

        <p>In the recent <a href="http://www.hanselman.com/blog/ReleasedASPNETAndWebTools20122InContext.aspx">ASP.Net and Web Tools 2012.2 Update</a> a new feature was added to allow pasting of JSON as .Net classes. This feature allows you to generate strongly typed classes in C# or VB.NET from valid JSON text. To use the feature, open a .vb or .cs file, copy the JSON text to the clipboard, select “Paste Special” from the Edit menu, and then select “Paste JSON As Classes.”</p>

<p>The feature uses the <a href="http://json.codeplex.com/">Json.Net JSON parser</a> from Newtonsoft to parse JSON text from the clipboard. Once the parser validates the clipboard data as valid JSON, it converts it into the C# or VB.NET class depending on the selected file type.  If the JSON object on the clipboard is invalid, a dialog is displayed showing the Json.Net error message with the reason the text was not valid JSON.</p>

<!--excerpt-->

<p>I am currently working on a new diagnostics report for <a href="http://teststack.github.com/pages/BDDfy.html">BDDfy</a> which outputs the time it took to run each story, scenario, and scenario step (each Given When Then method). This produces the following JSON output for the BDDfy ATM sample.</p>

<pre><code>{
    "Stories":
    [
        {
            "Name":"Account holder withdraws cash",
            "Duration":30,
            "Scenarios":
            [
                {
                    "Name":"Account has insufficient fund",
                    "Duration":29,
                    "Steps":
                    [
                        {
                            "Name":"Given the Account Balance is $10",
                            "Duration":1
                        },
                        {
                            "Name":"And the Card is valid",
                            "Duration":0
                        },
                        {
                            "Name":"And the machine contains enough money",
                            "Duration":4
                        },
                        {
                            "Name":"When the Account Holder requests $20",
                            "Duration":0
                        },
                        {
                            "Name":"Then the ATM should not dispense any Money",
                            "Duration":20
                        },
                        {
                            "Name":"And the ATM should say there are Insufficient Funds",
                            "Duration":0
                        },
                        {
                            "Name":"And the Account Balance should be $20",
                            "Duration":0
                        },
                        {
                            "Name":"And the Card should be returned",
                            "Duration":1
                        }
                    ]
                },
                {
                    "Name":"Account has sufficient fund",
                    "Duration":1,
                    "Steps":
                    [
                        {
                            "Name":"Given the account balance is $100",
                            "Duration":0
                        },
                        {
                            "Name":"And the Card is valid",
                            "Duration":0
                        },
                        {
                            "Name":"And the machine contains enough money",
                            "Duration":0
                        },
                        {
                            "Name":"When the account holder requests $20",
                            "Duration":0
                        },
                        {
                            "Name":"Then the ATM should dispense $20",
                            "Duration":0
                        },
                        {
                            "Name":"And the account balance should be $80",
                            "Duration":0
                        },
                        {
                            "Name":"And the card should be returned",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Card has been disabled",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the Card is disabled",
                            "Duration":0
                        },
                        {
                            "Name":"When the Account Holder requests 20",
                            "Duration":0
                        },
                        {
                            "Name":"Then Card is retained",
                            "Duration":0
                        },
                        {
                            "Name":"And the ATM should say the Card has been retained",
                            "Duration":0
                        }
                    ]
                }
            ]
        },
        {
            "Name":"Tic tac toe",
            "Duration":25,
            "Scenarios":
            [
                {
                    "Name":"Cat\u0027s game",
                    "Duration":13,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, O, X\r\nO, O, X\r\nX, X, O",
                            "Duration":5
                        },
                        {
                            "Name":"Then it should be a cats game",
                            "Duration":7
                        }
                    ]
                },
                {
                    "Name":"Diagonal win",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, O, O\r\nX, O, X\r\nO, X,  ",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is O",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Horizontal win",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, X, X\r\nX, O, O\r\nO, O, X",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is X",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Horizontal win in the bottom",
                    "Duration":1,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, X,  \r\nX, O, X\r\nO, O, O",
                            "Duration":1
                        },
                        {
                            "Name":"Then the winner is O",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Horizontal win in the middle",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, O, O\r\nX, X, X\r\nO, O, X",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is X",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"O wins",
                    "Duration":6,
                    "Steps":
                    [
                        {
                            "Name":"Given the following board X, X, O, X, O,  ,  ,  ,",
                            "Duration":0
                        },
                        {
                            "Name":"When the game is played at (2, 0)",
                            "Duration":5
                        },
                        {
                            "Name":"Then the winner should be O",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Vertical win in the left",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, O, O\r\nX, O, X\r\nX, X, O",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is X",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Vertical win in the middle",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\n , X, O\r\nO, X, O\r\nO, X, X",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is X",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"Vertical win in the right",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, O, X\r\nO, O, X\r\nO, X, X",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner is X",
                            "Duration":0
                        }
                    ]
                },
                {
                    "Name":"When x and o play their first moves",
                    "Duration":5,
                    "Steps":
                    [
                        {
                            "Name":"Given a new game",
                            "Duration":0
                        },
                        {
                            "Name":"When X and O play on (0, 0), (2, 2)",
                            "Duration":0
                        },
                        {
                            "Name":"Then the board state should be X,  ,  ,  ,  ,  ,  ,  , O",
                            "Duration":4
                        }
                    ]
                },
                {
                    "Name":"X wins",
                    "Duration":0,
                    "Steps":
                    [
                        {
                            "Name":"Given the board\r\nX, X, O\r\nX, X, O\r\nO, O,  ",
                            "Duration":0
                        },
                        {
                            "Name":"When x plays in the bottom right",
                            "Duration":0
                        },
                        {
                            "Name":"Then the winner should be x",
                            "Duration":0
                        }
                    ]
                }
            ]
        }
    ]
}
</code></pre>

<p>The Paste JSON as Classes operation produces the following C# output:</p>

<pre><code>public class Rootobject
{
    public Story[] Stories { get; set; }
}

public class Story
{
    public string Name { get; set; }
    public int Duration { get; set; }
    public Scenario[] Scenarios { get; set; }
}

public class Scenario
{
    public string Name { get; set; }
    public int Duration { get; set; }
    public Step[] Steps { get; set; }
}

public class Step
{
    public string Name { get; set; }
    public int Duration { get; set; }
}    
</code></pre>

<p>You can find the ATM sample in the <a href="https://github.com/TestStack/TestStack.BDDfy/tree/master/TestStack.BDDfy.Samples/Atm">BDDfy source code</a>, or you can install it from <a href="http://www.nuget.org/packages/TestStack.BDDfy.Samples">NuGet</a>.</p>

<p>You can read more about the Paste JSON as Classes feature <a href="http://blogs.msdn.com/b/webdev/archive/2012/12/18/paste-json-as-classes-in-asp-net-and-web-tools-2012-2-rc.aspx">here:</a></p>

    </div>
    
    <!-- Add this toolbox-->
    <div class="row addThis">
        <div class="addthis_toolbox addthis_default_style row pull-right" style="margin:10px">
            <a class="addthis_button_facebook_like" fb:like:layout="button_count"></a>
            <a class="addthis_button_tweet"></a>
            <a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
            <a class="addthis_button_linkedin_counter"></a>
            <a class="addthis_counter addthis_pill_style"></a>
        </div>
    </div>
    
    <!-- Disqus Comments -->
    <div class="row">
        <div id="disqus_thread"></div>
<script>
    var reset_disqus = function(){
        DISQUS.reset({
            reload: true,
            config: function () {
                //this.page.identifier = '';
                this.page.url = 'http://www.michael-whelan.net/2013/02/23/paste-json-as-classes/';
                //this.page.title = '';
            }
        });
    };

    var disqus_shortname = 'givenwhenthen';
    var disqus_url = 'http://www.michael-whelan.net/2013/02/23/paste-json-as-classes/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    window.addEventListener('orientationchange', reset_disqus);
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>        
    </div>
    
    <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-53d54a0e28fe9235"></script>

    <!-- Authorship Google -->
    <a style="display: block; width: 30px; height: 30px; text-indent: -999px; text-decoration: none" href="https://plus.google.com/u/1/105055485720815974241?rel=author">Google</a>
</div>

        </div>

        <hr>

        <footer class="row">
            <p>&copy; 2014 - Powered by <a href="https://github.com/Sandra/Sandra.Snow" rel="generator">Sandra.Snow</a>.</p>
        </footer>
    </div> <!-- /container -->
    <script src="//code.jquery.com/jquery.js"></script>
    <script src="/javascripts/bootstrap.min.js"></script>
    <script src="/javascripts/prettify.js"></script>

    <script type="text/javascript">
var _gaq = _gaq || [];

_gaq.push(['_setAccount', 'UA-49651944-1']);
_gaq.push(['_trackPageview']);
        
(function () {
    var ga = document.createElement('script');
    ga.type = 'text/javascript';
    ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(ga, s);
})();
</script>

<script type='text/javascript'>
        $(function () {
            $("pre code").parent().each(function () {
                if (!$(this).hasClass("prettyprint")) {
                    $(this).addClass("prettyprint");
                    a = true
                }
            });

            prettyPrint();
        });
    </script>
    

    
    <!-- Authorship Google -->
    <a style="display: block; width: 30px; height: 30px; text-indent: -999px; text-decoration: none" href="https://plus.google.com/u/1/105055485720815974241?rel=author">Google</a>
</body>
</html>
